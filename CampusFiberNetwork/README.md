# CampusFiberNetwork

校园光纤网络规划与设计工具 - 最小生成树求解

## 项目简介

该项目是一个用于校园光纤网络规划与设计的图形化工具，基于Qt 6框架开发，使用CMake进行构建管理。项目实现了Kruskal算法来求解最小生成树问题，帮助用户以最低成本规划校园光纤网络拓扑。

## 依赖要求

- Qt 6.0或更高版本（需要包含Core、Widgets和Gui模块）
- CMake 3.16或更高版本
- C++17兼容的编译器

## 构建步骤

### 1. 安装依赖

确保已安装Qt 6开发环境和CMake。

### 2. 构建并运行项目

使用CMake构建项目，然后编译运行。

## 项目结构

- `main.cpp`: 程序入口点
- `MainWindow.cpp/.h`: 主窗口界面和交互逻辑
- `ManualInputDialog.cpp/.h`: 手动输入图数据的对话框
- `Graph.cpp/.h`: 图数据结构和Kruskal算法实现
- `Node.cpp/.h`: 节点数据结构实现
- `Edge.cpp/.h`: 边数据结构
- `UnionFind.cpp/.h`: 并查集算法实现（用于Kruskal算法）
- `GraphFileIO.cpp/.h`: 图文件的读写操作
- `MainWindow.ui`: 主窗口界面设计（Qt Designer文件）
- `CMakeLists.txt`: CMake构建配置文件

## 功能特性

- **可视化显示**：直观展示校园光纤网络拓扑结构
- **随机生成图**：快速生成指定数量节点的随机图
- **文件导入**：支持从文本文件导入网络数据
- **手动输入**：通过对话框手动输入节点和坐标值
- **鼠标点击输入**：在视图中通过鼠标点击直接添加节点
- **Kruskal算法**：实现最小生成树求解，高亮显示结果
- **结果展示**：显示最小生成树的总权重
- **视图操作**：支持Ctrl+滚轮缩放视图

## 文件格式说明

```
<节点数量>
<节点1 X坐标> <节点1 Y坐标>
<节点2 X坐标> <节点2 Y坐标>
...
<节点N X坐标> <节点N Y坐标>
```

示例：
```
6
100 200
150 300
200 250
300 150
250 100
180 280
```


## 操作说明

1. **随机生成图**：
   - 在节点数量输入框中设置所需节点数
   - 点击"随机生成图"按钮

2. **文件导入**：
   - 点击"文件输入图"按钮
   - 选择包含图数据的文本文件
   - 程序将自动解析并显示图结构

3. **手动输入**：
   - 点击"人工输入图"按钮
   - 在弹出的对话框中添加节点并输入坐标
   - 点击"OK"完成输入

4. **鼠标点击输入**：
   - 在视图区域点击鼠标左键可以直接添加节点
   - 节点将自动添加到鼠标点击的位置
   - 可以连续点击添加多个节点

5. **运行算法**：
   - 确保已生成或导入图数据
   - 点击"运行Kruskal算法"按钮
   - 程序将计算最小生成树并高亮显示结果
   - 右下方将显示最小生成树的总权重

6. **清除图**：
   - 点击"清除图"按钮
   - 当前图将被清除，结果标签将重置

7. **视图操作**：
   - 按住Ctrl键并滚动鼠标滚轮可以缩放视图

## 注意事项

- 确保Qt环境变量已正确配置
- 首次运行可能需要Qt运行时库支持
- 建议使用Release模式构建以获得更好的性能
- 节点坐标范围建议x坐标[-700, 700]，y坐标[-500,500]之间，以确保在视图中正确显示
- 算法执行后无法添加新节点，需要重新生成或导入图
- 清除图或生成新图时，之前的算法结果将被自动清除

## 测试用例说明

项目包含多个测试用例文件，用于验证算法的正确性：

- `normal_nodes.txt`: 普通分散节点测试用例
- `collinear_nodes.txt`: 共线节点测试用例
- `large_nodes.txt`: 较大规模节点测试用例

## 常见问题

### 构建失败，提示找不到Qt库
- 确保已正确安装Qt 6
- 检查CMake命令中的`CMAKE_PREFIX_PATH`是否指向正确的Qt安装目录

### 程序运行时节点显示不完整
- 检查节点坐标是否合法
- 尝试使用Ctrl+滚轮缩放视图

### 文件导入时节点数量显示错误
- 确保文件格式正确，首行必须是节点数量
- 检查文件编码是否为UTF-8

